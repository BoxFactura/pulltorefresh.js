!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.PullToRefresh=t()}(this,function(){"use strict";var e={pullStartY:null,pullMoveY:null,handlers:[],styleEl:null,events:null,dist:0,state:"pending",timeout:null,distResisted:0,supportsPassive:!1};try{window.addEventListener("test",null,{get passive(){e.supportsPassive=!0}})}catch(e){}var t={setupDOM:function(t){if(!t.ptrElement){var n=document.createElement("div");t.mainElement!==document.body?t.mainElement.parentNode.insertBefore(n,t.mainElement):document.body.insertBefore(n,document.body.firstChild),n.classList.add(t.classPrefix+"ptr"),n.innerHTML=t.getMarkup().replace(/__PREFIX__/g,t.classPrefix),t.ptrElement=n,"function"==typeof t.onInit&&t.onInit(t),e.styleEl||(e.styleEl=document.createElement("style"),e.styleEl.setAttribute("id","pull-to-refresh-js-style"),document.head.appendChild(e.styleEl)),e.styleEl.textContent=t.getStyles().replace(/__PREFIX__/g,t.classPrefix).replace(/\s+/g," ")}return t},onReset:function(t){t.ptrElement.classList.remove(t.classPrefix+"refresh"),t.ptrElement.style[t.cssProp]="0px",setTimeout(function(){t.ptrElement&&t.ptrElement.parentNode&&(t.ptrElement.parentNode.removeChild(t.ptrElement),t.ptrElement=null),e.state="pending"},t.refreshTimeout)},update:function(t){var n=t.ptrElement.querySelector("."+t.classPrefix+"icon"),s=t.ptrElement.querySelector("."+t.classPrefix+"text");n&&("refreshing"===e.state?n.innerHTML=t.iconRefreshing:n.innerHTML=t.iconArrow),s&&("releasing"===e.state&&(s.innerHTML=t.instructionsReleaseToRefresh),"pulling"!==e.state&&"pending"!==e.state||(s.innerHTML=t.instructionsPullToRefresh),"refreshing"===e.state&&(s.innerHTML=t.instructionsRefreshing))}},n=function(){var n;function s(s){var r=e.handlers.filter(function(e){return e.contains(s.target)})[0];e.enable=!!r,r&&"pending"===e.state&&(n=t.setupDOM(r),r.shouldPullToRefresh()&&(e.pullStartY=s.touches[0].screenY),clearTimeout(e.timeout),t.update(r))}function r(s){n&&n.ptrElement&&e.enable&&(e.pullStartY?e.pullMoveY=s.touches[0].screenY:n.shouldPullToRefresh()&&(e.pullStartY=s.touches[0].screenY),"refreshing"!==e.state?("pending"===e.state&&(n.ptrElement.classList.add(n.classPrefix+"pull"),e.state="pulling",t.update(n)),e.pullStartY&&e.pullMoveY&&(e.dist=e.pullMoveY-e.pullStartY),e.distExtra=e.dist-n.distIgnore,e.distExtra>0&&(s.preventDefault(),n.ptrElement.style[n.cssProp]=e.distResisted+"px",e.distResisted=n.resistanceFunction(e.distExtra/n.distThreshold)*Math.min(n.distMax,e.distExtra),"pulling"===e.state&&e.distResisted>n.distThreshold&&(n.ptrElement.classList.add(n.classPrefix+"release"),e.state="releasing",t.update(n)),"releasing"===e.state&&e.distResisted<n.distThreshold&&(n.ptrElement.classList.remove(n.classPrefix+"release"),e.state="pulling",t.update(n)))):n.shouldPullToRefresh()&&e.pullStartY<e.pullMoveY&&s.preventDefault())}function i(){if(n&&n.ptrElement&&e.enable){if("releasing"===e.state&&e.distResisted>n.distThreshold)e.state="refreshing",n.ptrElement.style[n.cssProp]=n.distReload+"px",n.ptrElement.classList.add(n.classPrefix+"refresh"),e.timeout=setTimeout(function(){var e=n.onRefresh(function(){return t.onReset(n)});e&&"function"==typeof e.then&&e.then(function(){return t.onReset(n)}),e||n.onRefresh.length||t.onReset(n)},n.refreshTimeout);else{if("refreshing"===e.state)return;n.ptrElement.style[n.cssProp]="0px",e.state="pending"}t.update(n),n.ptrElement.classList.remove(n.classPrefix+"release"),n.ptrElement.classList.remove(n.classPrefix+"pull"),e.pullStartY=e.pullMoveY=null,e.dist=e.distResisted=0}}function o(){n&&n.mainElement.classList.toggle(n.classPrefix+"top",n.shouldPullToRefresh())}var l=e.supportsPassive?{passive:e.passive||!1}:void 0;return window.addEventListener("touchend",i),window.addEventListener("touchstart",s),window.addEventListener("touchmove",r,l),window.addEventListener("scroll",o),{onTouchEnd:i,onTouchStart:s,onTouchMove:r,onScroll:o,destroy:function(){window.removeEventListener("touchstart",s),window.removeEventListener("touchend",i),window.removeEventListener("touchmove",r,l),window.removeEventListener("scroll",o)}}},s={distThreshold:60,distMax:80,distReload:50,distIgnore:0,mainElement:"body",triggerElement:"body",ptrElement:".ptr",classPrefix:"ptr--",cssProp:"min-height",iconArrow:"&#8675;",iconRefreshing:"&hellip;",instructionsPullToRefresh:"Pull down to refresh",instructionsReleaseToRefresh:"Release to refresh",instructionsRefreshing:"Refreshing",refreshTimeout:500,getMarkup:function(){return'\n<div class="__PREFIX__box">\n  <div class="__PREFIX__content">\n    <div class="__PREFIX__icon"></div>\n    <div class="__PREFIX__text"></div>\n  </div>\n</div>\n'},getStyles:function(){return"\n.__PREFIX__ptr {\n  box-shadow: inset 0 -3px 5px rgba(0, 0, 0, 0.12);\n  pointer-events: none;\n  font-size: 0.85em;\n  font-weight: bold;\n  top: 0;\n  height: 0;\n  transition: height 0.3s, min-height 0.3s;\n  text-align: center;\n  width: 100%;\n  overflow: hidden;\n  display: flex;\n  align-items: flex-end;\n  align-content: stretch;\n}\n\n.__PREFIX__box {\n  padding: 10px;\n  flex-basis: 100%;\n}\n\n.__PREFIX__pull {\n  transition: none;\n}\n\n.__PREFIX__text {\n  margin-top: .33em;\n  color: rgba(0, 0, 0, 0.3);\n}\n\n.__PREFIX__icon {\n  color: rgba(0, 0, 0, 0.3);\n  transition: transform .3s;\n}\n\n/*\nWhen at the top of the page, disable vertical overscroll so passive touch\nlisteners can take over.\n*/\n.__PREFIX__top {\n  touch-action: pan-x pan-down pinch-zoom;\n}\n\n.__PREFIX__release {\n  .__PREFIX__icon {\n    transform: rotate(180deg);\n  }\n}\n"},onInit:function(){},onRefresh:function(){return location.reload()},resistanceFunction:function(e){return Math.min(1,e/2.5)},shouldPullToRefresh:function(){return!window.scrollY}},r=["mainElement","ptrElement","triggerElement"],i=function(t){var i={};return Object.keys(s).forEach(function(e){i[e]=t[e]||s[e]}),i.refreshTimeout="number"==typeof t.refreshTimeout?t.refreshTimeout:s.refreshTimeout,r.forEach(function(e){"string"==typeof i[e]&&(i[e]=document.querySelector(i[e]))}),e.events||(e.events=n()),i.contains=function(e){return i.triggerElement.contains(e)},i.destroy=function(){clearTimeout(e.timeout),e.handlers.splice(i.offset,1)},i};return{setPassiveMode:function(t){e.passive=t},destroyAll:function(){e.events&&(e.events.destroy(),e.events=null),e.handlers.forEach(function(e){e.destroy()})},init:function(t){void 0===t&&(t={});var n=i(t);return n.offset=e.handlers.push(n)-1,n},_:{setupHandler:i,setupEvents:n,setupDOM:t.setupDOM,onReset:t.onReset,update:t.update}}});
//# sourceMappingURL=pulltorefresh.min.js.map
